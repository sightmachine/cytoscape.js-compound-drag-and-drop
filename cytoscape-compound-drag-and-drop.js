!function(e,n){"object"==typeof exports&&"object"==typeof module?module.exports=n():"function"==typeof define&&define.amd?define([],n):"object"==typeof exports?exports.cytoscapeCompoundDragAndDrop=n():e.cytoscapeCompoundDragAndDrop=n()}(self,(function(){return e={658:e=>{e.exports=null!=Object.assign?Object.assign.bind(Object):function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];return r.filter((function(e){return null!=e})).forEach((function(n){Object.keys(n).forEach((function(r){return e[r]=n[r]}))})),e}},738:e=>{e.exports={grabbedNode:function(e){return!0},dropTarget:function(e,n){return!0},dropSibling:function(e,n){return!0},newParentNode:function(e,n){return{}},boundingBoxOptions:{includeOverlays:!1,includeLabels:!0},overThreshold:10,outThreshold:10}},904:(e,n,r)=>{var o=r(658),t=r(738),d=r(43),i=r(444),s=function(e,n){this.cy=e,this.options=o({},t,n),this.listeners=[],this.enabled=!0,this.addListeners()};[d,i,{destroy:function(){this.removeListeners()}}].forEach((function(e){o(s.prototype,e)})),e.exports=function(e){return new s(this,e)}},444:(e,n,r)=>{var o=r(235),t=o.isParent,d=o.isChild,i=o.isOnlyChild,s=o.getBounds,a=o.getBoundsTuple,u=o.boundsOverlap,c=o.expandBounds,l=o.getBoundsCopy,p=o.setParent,b=o.removeParent;e.exports={addListener:function(e,n,r){this.listeners.push({event:e,selector:n,callback:r}),null==n?this.cy.on(e,r):this.cy.on(e,n,r)},addListeners:function(){var e=this,n=this.options,r=this.cy,o=function(e){return a(e,n.boundingBoxOptions)},g=function(r){return(function(r){return!d(r)&&!r.same(e.grabbedNode)&&n.dropTarget(r,e.grabbedNode)}(r)||function(r){return d(r)&&!r.same(e.grabbedNode)&&n.dropSibling(r,e.grabbedNode)}(r))&&!r.same(e.dropTarget)},f=function(){return e.boundsTuples=r.nodes(g).map(o)},h=function(){e.grabbedNode.removeClass("cdnd-grabbed-node"),e.dropTarget.removeClass("cdnd-drop-target"),e.dropSibling.removeClass("cdnd-drop-sibling"),e.grabbedNode=r.collection(),e.dropTarget=r.collection(),e.dropSibling=r.collection(),e.dropTargetBounds=null,e.boundsTuples=[],e.inGesture=!1};this.addListener("grab","node",(function(o){var t,i=o.target;e.enabled&&(!function(e){return e.selected()&&r.elements(".parent-node:selected").length>1}(t=i)&&n.grabbedNode(t))&&(e.inGesture=!0,e.grabbedNode=i,e.dropTarget=r.collection(),e.dropSibling=r.collection(),d(i)&&(e.dropTarget=i.parent(),e.dropTargetBounds=l(e.dropTarget,n.boundingBoxOptions)),f(),e.grabbedNode.addClass("cdnd-grabbed-node"),e.dropTarget.addClass("cdnd-drop-target"),i.emit("cdndgrab"))})),this.addListener("add","node",(function(r){if(e.inGesture&&e.enabled){var o=r.target;g(o)&&e.boundsTuples.push(a(o,n.boundingBoxOptions))}})),this.addListener("remove","node",(function(n){if(e.inGesture&&e.enabled){var o=n.target,t=o.same(e.dropTarget),d=o.same(e.dropSibling),i=o.same(e.grabbedNode);(t||d||i)&&(i?h():(e.dropTarget=r.collection(),e.dropSibling=r.collection(),f()))}})),this.addListener("drag","node",(function(){if(e.inGesture&&e.enabled)if(e.dropTarget.nonempty()){var o=c(s(e.grabbedNode,n.boundingBoxOptions),n.outThreshold),d=e.dropTarget,a=e.dropSibling,g=!u(e.dropTargetBounds,o),h=i(e.grabbedNode);if(g){b(e.grabbedNode),b(e.dropSibling),e.dropTarget.removeClass("cdnd-drop-target"),e.dropSibling.removeClass("cdnd-drop-sibling");var v=e.dropTarget&&e.dropTarget.hasClass("cdnd-new-parent");(e.dropSibling.nonempty()||h)&&v&&e.dropTarget.remove(),e.dropTarget=r.collection(),e.dropSibling=r.collection(),e.dropTargetBounds=null,v&&f(),e.grabbedNode.emit("cdndout",[d,a])}}else{var y=c(s(e.grabbedNode,n.boundingBoxOptions),n.overThreshold),x=e.boundsTuples.filter((function(e){return!e.node.removed()&&u(y,e.bb)})).map((function(e){return e.node}));if(x.length>0){var m,T,B=x.filter(t);B.length>0?(T=r.collection(),m=B[0]):(T=x[0],m=r.add(n.newParentNode(e.grabbedNode,T))),m.addClass("cdnd-drop-target"),m!==T&&m.addClass("cdnd-new-parent"),T.addClass("cdnd-drop-sibling"),p(T,m),e.dropTargetBounds=l(m,n.boundingBoxOptions),p(e.grabbedNode,m),e.dropTarget=m,e.dropSibling=T,e.grabbedNode.emit("cdndover",[m,T])}}})),this.addListener("free","node",(function(){if(e.inGesture&&e.enabled){var n=e.grabbedNode,r=e.dropTarget,o=e.dropSibling;h(),n.emit("cdnddrop",[r,o])}}))},removeListeners:function(){var e=this.cy;this.listeners.forEach((function(n){var r=n.event,o=n.selector,t=n.callback;null==o?e.removeListener(r,t):e.removeListener(r,o,t)})),this.listeners=[]}}},43:e=>{e.exports={enable:function(){this.enabled=!0},disable:function(){this.enabled=!1}}},235:e=>{var n=function(e){return e.isChild()},r=function(e,n){return e.boundingBox(n)},o=function(e){return{x1:e.x1,x2:e.x2,y1:e.y1,y2:e.y2,w:e.w,h:e.h}};e.exports={isParent:function(e){return e.isParent()},isChild:n,isOnlyChild:function(e){return n(e)&&1===e.parent().children().length},getBoundsTuple:function(e,n){return{node:e,bb:o(r(e,n))}},boundsOverlap:function(e,n){return!(e.x1>n.x2||n.x1>e.x2||e.x2<n.x1||n.x2<e.x1||e.y2<n.y1||n.y2<e.y1||e.y1>n.y2||n.y1>e.y2)},getBounds:r,expandBounds:function(e,n){return{x1:e.x1-n,x2:e.x2+n,w:e.w+2*n,y1:e.y1-n,y2:e.y2+n,h:e.h+2*n}},copyBounds:o,getBoundsCopy:function(e,n){return o(r(e,n))},removeParent:function(e){return e.move({parent:null})},setParent:function(e,n){return e.move({parent:n.id()})}}},579:(e,n,r)=>{var o=r(904),t=function(e){e&&e("core","compoundDragAndDrop",o)};"undefined"!=typeof cytoscape&&t(cytoscape),e.exports=t}},n={},function r(o){var t=n[o];if(void 0!==t)return t.exports;var d=n[o]={exports:{}};return e[o](d,d.exports,r),d.exports}(579);var e,n}));