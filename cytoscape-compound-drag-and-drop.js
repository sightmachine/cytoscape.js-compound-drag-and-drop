!function(e,n){"object"==typeof exports&&"object"==typeof module?module.exports=n():"function"==typeof define&&define.amd?define([],n):"object"==typeof exports?exports.cytoscapeCompoundDragAndDrop=n():e.cytoscapeCompoundDragAndDrop=n()}(self,(function(){return e={658:e=>{e.exports=null!=Object.assign?Object.assign.bind(Object):function(e){for(var n=arguments.length,o=new Array(n>1?n-1:0),r=1;r<n;r++)o[r-1]=arguments[r];return o.filter((function(e){return null!=e})).forEach((function(n){Object.keys(n).forEach((function(o){return e[o]=n[o]}))})),e}},738:e=>{e.exports={grabbedNode:function(e){return!0},dropTarget:function(e,n){return!0},dropSibling:function(e,n){return!0},newParentNode:function(e,n){return{}},boundingBoxOptions:{includeOverlays:!1,includeLabels:!0},overThreshold:10,outThreshold:10,allowMultipleNodeSelection:!1}},904:(e,n,o)=>{var r=o(658),t=o(738),d=o(43),i=o(444),a=function(e,n){this.cy=e,this.options=r({},t,n),this.listeners=[],this.enabled=!0,this.addListeners()};[d,i,{destroy:function(){this.removeListeners()}}].forEach((function(e){r(a.prototype,e)})),e.exports=function(e){return new a(this,e)}},444:(e,n,o)=>{var r=o(235),t=r.isParent,d=r.isChild,i=r.isOnlyChild,a=r.getBounds,s=r.getBoundsTuple,u=r.boundsOverlap,c=r.expandBounds,l=r.getBoundsCopy,p=r.setParent,b=r.removeParent;e.exports={addListener:function(e,n,o){this.listeners.push({event:e,selector:n,callback:o}),null==n?this.cy.on(e,o):this.cy.on(e,n,o)},addListeners:function(){var e=this,n=this.options,o=this.cy,r=function(e){return s(e,n.boundingBoxOptions)},g=function(o){return(function(o){return!d(o)&&!o.same(e.grabbedNode)&&n.dropTarget(o,e.grabbedNode)}(o)||function(o){return d(o)&&!o.same(e.grabbedNode)&&n.dropSibling(o,e.grabbedNode)}(o))&&!o.same(e.dropTarget)},f=function(){e.boundsTuples=o.nodes(g).map(r)},h=function(){e.grabbedNode.removeClass("cdnd-grabbed-node"),e.dropTarget.removeClass("cdnd-drop-target"),e.dropSibling.removeClass("cdnd-drop-sibling"),e.grabbedNode=o.collection(),e.dropTarget=o.collection(),e.dropSibling=o.collection(),e.dropTargetBounds=null,e.boundsTuples=[],e.inGesture=!1,e.addingParent=!1};this.addListener("grab","node",(function(r){var t,i=n.allowMultipleNodeSelection?o.$("node:grabbed"):r.target;e.enabled&&(t=i,n.grabbedNode(t))&&(e.inGesture=!0,e.grabbedNode=i,e.dropTarget=o.collection(),e.dropSibling=o.collection(),function(e){return d(e)}(i)&&(e.dropTarget=i.parent(),e.dropTargetBounds=l(e.dropTarget,n.boundingBoxOptions)),f(),e.grabbedNode.addClass("cdnd-grabbed-node"),e.dropTarget.addClass("cdnd-drop-target"),i.emit("cdndgrab"))})),this.addListener("add","node",(function(o){if(e.inGesture&&e.enabled){var r=o.target;g(r)&&e.boundsTuples.push(s(r,n.boundingBoxOptions))}})),this.addListener("remove","node",(function(n){if(e.inGesture&&e.enabled){var r=n.target,t=r.same(e.dropTarget),d=r.same(e.dropSibling),i=r.same(e.grabbedNode);(t||d||i)&&(i?h():(e.dropTarget=o.collection(),e.dropSibling=o.collection(),f()))}})),this.addListener("drag","node",function(){if(e.inGesture&&e.enabled&&!e.addingParent)if(e.dropTarget.nonempty()){var d=!1;if(n.allowMultipleNodeSelection&&e.grabbedNode.length>1)d=e.grabbedNode.some((function(o){var r=c(a(o,n.boundingBoxOptions),n.outThreshold);return!u(e.dropTargetBounds,r)}));else{var s=c(a(e.grabbedNode,n.boundingBoxOptions),n.outThreshold);d=!u(e.dropTargetBounds,s)}var g=e.dropTarget,h=e.dropSibling,v=i(e.grabbedNode);if(d){b(e.grabbedNode),b(e.dropSibling),e.dropTarget.removeClass("cdnd-drop-target"),e.dropSibling.removeClass("cdnd-drop-sibling");var y=e.dropTarget&&e.dropTarget.hasClass("cdnd-new-parent");(e.dropSibling.nonempty()||v)&&y&&e.dropTarget.remove(),e.dropTarget=o.collection(),e.dropSibling=o.collection(),e.dropTargetBounds=null,y&&f(),e.grabbedNode.emit("cdndout",[g,h])}}else{var x=o.collection();if(e.grabbedNode.clone().forEach((function(o){var t=c(a(o,n.boundingBoxOptions),n.overThreshold),d=function(e){return!e.node.removed()&&u(t,e.bb)};e.boundsTuples.forEach((function(e){d(e)&&d(r(e.node,n.boundingBoxOptions))&&x.merge(e.node)}))})),x.length>0){e.addingParent=!0;var m,T,B=x.filter(t);B.length>0?(T=o.collection(),m=B.first()):(T=x,m=o.add(n.newParentNode(e.grabbedNode,T))),m.addClass("cdnd-drop-target"),m!==T&&m.addClass("cdnd-new-parent"),T.addClass("cdnd-drop-sibling"),p(T,m),e.dropTargetBounds=l(m,n.boundingBoxOptions),p(e.grabbedNode,m),e.dropTarget=m,e.dropSibling=T,setTimeout((function(){e.addingParent=!1}),100),e.grabbedNode.emit("cdndover",[m,T])}}}.bind(this)),this.addListener("free","node",(function(){if(e.inGesture&&e.enabled){var n=e.grabbedNode,o=e.dropTarget,r=e.dropSibling;h(),n.emit("cdnddrop",[o,r])}}))},removeListeners:function(){var e=this.cy;this.listeners.forEach((function(n){var o=n.event,r=n.selector,t=n.callback;null==r?e.removeListener(o,t):e.removeListener(o,r,t)})),this.listeners=[]}}},43:e=>{e.exports={enable:function(){this.enabled=!0},disable:function(){this.enabled=!1}}},235:e=>{var n=function(e){return e.isChild()},o=function(e,n){return e.boundingBox(n)},r=function(e){return{x1:e.x1,x2:e.x2,y1:e.y1,y2:e.y2,w:e.w,h:e.h}};e.exports={isParent:function(e){return e.isParent()},isChild:n,isOnlyChild:function(e){return n(e)&&e.parent().children().length===e.length},getBoundsTuple:function(e,n){return{node:e,bb:r(o(e,n))}},boundsOverlap:function(e,n){return!(e.x1>n.x2||n.x1>e.x2||e.x2<n.x1||n.x2<e.x1||e.y2<n.y1||n.y2<e.y1||e.y1>n.y2||n.y1>e.y2)},getBounds:o,expandBounds:function(e,n){return{x1:e.x1-n,x2:e.x2+n,w:e.w+2*n,y1:e.y1-n,y2:e.y2+n,h:e.h+2*n}},copyBounds:r,getBoundsCopy:function(e,n){return r(o(e,n))},removeParent:function(e){var n=e.cy();n.startBatch(),e.forEach((function(e){return e.move({parent:null})})),n.endBatch()},setParent:function(e,n){var o=e.cy();o.startBatch(),e.forEach((function(e){return e.move({parent:n.id()})})),o.endBatch()}}},579:(e,n,o)=>{var r=o(904),t=function(e){e&&e("core","compoundDragAndDrop",r)};"undefined"!=typeof cytoscape&&t(cytoscape),e.exports=t}},n={},function o(r){var t=n[r];if(void 0!==t)return t.exports;var d=n[r]={exports:{}};return e[r](d,d.exports,o),d.exports}(579);var e,n}));